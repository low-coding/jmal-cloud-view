(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-fb42e23c"],{1e3:function(e,t,i){"use strict";i.d(t,"c",(function(){return n})),i.d(t,"b",(function(){return a})),i.d(t,"a",(function(){return o}));i("5df3"),i("f400"),i("ac6a");var s=i("33f9"),n={simText:["vue","asp","jsp","TXT","xml","xsl","iml","m","bas","prg","cmd","sass","sas","php","lst","key","pem","log","cmake","db","gradle","bat","conf","dart","plist"],compressedFile:["zip","tar","jar","tar.gz","tgz","tar.bz2"]};s["languages"].getLanguages().forEach((function(e){e.extensions.forEach((function(e){n.simText.push(e.substring(1,e.length))}))}));var a=["txt"],o=new Map;o.set("php","file-php"),o.set("js","file-js"),o.set("vue","file-vue"),o.set("xml","file-xml"),o.set("dart","file-dart"),o.set("html","file-html"),o.set("md","file-md"),o.set("txt","file-txt"),o.set("TXT","file-txt"),o.set("css","file-css"),o.set("scss","file-css"),o.set("java","file-java"),o.set("go","file-go"),o.set("DS_Store","file-Ds-store"),o.set("jar","file-jar"),o.set("properties","file-properties"),o.set("conf","file-conf"),o.set("factories","file-factories"),o.set("class","file-class"),o.set("excel","file-excel"),o.set("xls","file-excel"),o.set("xlsx","file-excel"),o.set("gitignore","file-gitignore"),o.set("ncm","file-ncm"),o.set("dmg","file-dmg"),o.set("pkg","file-pkg"),o.set("mpkg","file-pkg"),o.set("exe","file-exe"),o.set("word","file-word"),o.set("doc","file-word"),o.set("docx","file-word"),o.set("docxf","file-docxf"),o.set("ppt","file-ppt"),o.set("pptx","file-ppt"),o.set("drawio","file-drawio"),o.set("csv","file-csv"),o.set("pdf","file-pdf"),o.set("mind","file-mind"),o.set("zip","zip"),o.set("rar","zip"),o.set("iml","file-idea"),o.set("key","file-key"),o.set("pem","file-pem"),o.set("gz","file-gzip"),o.set("json","file-json"),o.set("tar","file-tar"),o.set("sh","file-shell"),o.set("log","file-log"),o.set("py","file-python"),o.set("cpp","file-cpp"),o.set("h","file-h"),o.set("xsl","file-xsl"),o.set("cmake","file-cmake"),o.set("db","file-db"),o.set("sql","file-db"),o.set("gradle","file-gradle"),o.set("bat","file-bat"),o.set("swift","file-swift"),o.set("yml","file-yml"),o.set("plist","file-plist"),o.set("iso","file-iso")},"1b2a":function(e,t,i){e.exports=i.p+"static/img/nplayer.b0c2d9c9.webp"},"1ef8":function(e,t,i){"use strict";i("8702")},"21c1":function(e,t,i){"use strict";i("98f0")},"3b6f":function(e,t,i){e.exports=i.p+"static/img/history.e973a23c.svg"},"488d":function(e,t,i){"use strict";i.r(t);i("6762"),i("2fdb"),i("7f7f");var s=function(){var e=this,t=e._self._c;return t("div",{directives:[{name:"resize",rawName:"v-resize",value:e.containerResize,expression:"containerResize"}],staticClass:"dashboard-container"},[t("transition",{attrs:{name:"fade"}},[e.isLoading?t("al-loading"):e._e()],1),e._v(" "),t("div",{staticClass:"share-h"},[t("div",{staticClass:"share-header"},[t("div",{staticClass:"share-header-content logo"},[t("Logo",{attrs:{width:"35"},model:{value:e.netdiskLogo,callback:function(t){e.netdiskLogo=t},expression:"netdiskLogo"}}),e._v(" "),t("span",[e._v(e._s(e.netdiskName))])],1),e._v(" "),e.sharer?t("div",{staticClass:"share-header-content sharer"},[t("span",[t("span",{staticClass:"user"},[e._v(e._s(e.sharer.showName))]),e._v("的分享")]),e._v(" "),t("el-avatar",{attrs:{src:e.sharerAvatarUrl}})],1):e._e()]),e._v(" "),t("el-divider",{staticClass:"header-location"}),e._v(" "),e.linkFailed?e._e():t("el-breadcrumb",{staticClass:"app-breadcrumb",attrs:{separator:""}},[t("transition-group",{attrs:{name:"breadcrumb"}},e._l(e.pathList,(function(i,s){return t("el-breadcrumb-item",{key:i.index},[0===s?t("span",[e._v("当前位置:")]):e._e(),e._v(" "),t("breadcrumb-file-path",{attrs:{pathList:e.pathList,item:i,index:s},on:{clickLink:e.handleLink}})],1)})),1),e._v(" "),t("div",{staticClass:"search-content"},[t("div",{staticClass:"search-class"},[e.indexList.length>0?t("el-button",{staticClass:"sort",attrs:{type:"text",title:"下载"},on:{click:function(t){return e.downloadFile(!1)}}},[t("svg-icon",{attrs:{"icon-class":"menu-download"}})],1):e._e(),e._v(" "),t("el-button",{staticClass:"vmode",attrs:{type:"text"},on:{click:e.changeVmode}},[t("svg-icon",{attrs:{"icon-class":e.grid?"list":"grid"}})],1)],1)])],1)],1),e._v(" "),t("e-vue-contextmenu",{ref:"contextShow",staticClass:"newFileMenu",class:e.menuTriangle,on:{"ctx-show":e.show,"ctx-hide":e.hide}},[t("div",{staticClass:"popper-arrow"}),e._v(" "),e._l(e.menus,(function(i){return t("ul",{key:i.label},[t("li",{staticClass:"menu-option",on:{click:function(t){return e.menusOperations(i.operation)}}},[t("label",{staticClass:"menuitem"},[t("svg-icon",{attrs:{"icon-class":i.iconClass}}),e._v(" "),t("span",{staticClass:"menuitem text"},[e._v(e._s(i.label))])],1)])])}))],2),e._v(" "),t("el-table",{directives:[{name:"show",rawName:"v-show",value:!e.grid&&!e.linkFailed&&!e.showShareCode,expression:"!grid && !linkFailed && !showShareCode"},{name:"loading",rawName:"v-loading",value:e.tableLoading,expression:"tableLoading"}],ref:"fileListTable",staticStyle:{width:"100%",margin:"20px 0 0 0"},attrs:{"empty-text":"无文件",data:e.fileList,"row-key":"id","summary-method":e.getSummaries,"show-summary":"","cell-style":e.rowRed,"row-class-name":e.tableRowClassName,"element-loading-text":"文件加载中","element-loading-spinner":"el-icon-loading","element-loading-background":"#f6f7fa88"},on:{"selection-change":e.handleSelectionChange,"row-contextmenu":e.rowContextmenu,"cell-click":e.cellClick,"cell-mouse-enter":e.cellMouseEnter,"cell-mouse-leave":e.cellMouseLeave}},[e._l(e.tableHead,(function(i,s){return[0===s?t("el-table-column",{key:s,attrs:{index:s,type:"selection","min-width":"50"}}):e._e(),e._v(" "),1===s?t("el-table-column",{key:s,attrs:{index:s,width:"50"},scopedSlots:e._u([{key:"default",fn:function(i){return[e.sharer?t("icon-file",{attrs:{item:i.row,"image-url":e.imageUrl,"audio-cover-url":e.audioUrl,public:!0}}):e._e()]}}],null,!0)}):e._e(),e._v(" "),2===s?t("el-table-column",{key:s,attrs:{"show-overflow-tooltip":!0,"max-width":"200",index:s,prop:i.name,label:i.label,sortable:i.sortable},on:{click:function(t){return t.stopPropagation(),e.fileClick(e.scope.row)}},scopedSlots:e._u([{key:"default",fn:function(i){return[i.row.index===e.editingIndex?t("el-col",{attrs:{span:10}},[t("el-input",{directives:[{name:"focus",rawName:"v-focus"}],attrs:{placeholder:"",size:"small",clearable:!0},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.rowRename(e.renameFileName,i.row)}},model:{value:e.renameFileName,callback:function(t){e.renameFileName=t},expression:"renameFileName"}}),e._v(" "),t("el-button",{directives:[{name:"loading",rawName:"v-loading",value:e.renameLoading,expression:"renameLoading"}],staticClass:"el-icon-check",attrs:{"element-loading-spinner":"el-icon-loading","element-loading-background":"#f6f7fa88"},on:{click:function(t){return e.rowRename(e.renameFileName,i.row)}}}),e._v(" "),t("el-button",{staticClass:"el-icon-close",attrs:{"element-loading-spinner":"el-icon-loading","element-loading-background":"#f6f7fa88"},on:{click:function(t){e.editingIndex=-1}}})],1):t("span",{staticClass:"table-file-name"},[e._v(e._s(i.row.name))])]}}],null,!0)}):e._e(),e._v(" "),3===s&&e.showUpdateDateItem?t("el-table-column",{key:s,attrs:{width:"50",index:s,align:"center","header-align":"center"}}):e._e(),e._v(" "),4===s&&e.showUpdateDateItem?t("el-table-column",{key:s,staticClass:"el-icon-more",attrs:{width:"50",prop:i.name,label:i.label,index:s,align:"center","header-align":"center"},scopedSlots:e._u([{key:"default",fn:function(i){return[i.row.index===e.cellMouseIndex?t("svg-icon",{staticClass:"button-class",attrs:{"icon-class":"more"},on:{click:function(t){return e.moreClick(i.row,t)}}}):e._e()]}}],null,!0)},[t("template",{slot:"header"},[""!==i.name?t("svg-icon",{staticClass:"button-class",attrs:{"icon-class":"more"},on:{click:function(t){return e.moreOperation(t)}}}):e._e()],1)],2):e._e(),e._v(" "),5===s&&e.showSizeItem?t("el-table-column",{key:s,attrs:{width:"200",prop:i.name,index:s,label:i.label,sortable:i.sortable,"show-overflow-tooltip":!0,align:"left","header-align":"left"},scopedSlots:e._u([{key:"default",fn:function(i){return[t("span",[e._v(e._s(e.formatSize(i.row.size)))])]}}],null,!0)}):e._e(),e._v(" "),6===s&&e.showUpdateDateItem?t("el-table-column",{key:s,attrs:{width:"300",prop:i.name,index:s,label:i.label,sortable:i.sortable,"show-overflow-tooltip":!0,align:"left","header-align":"left"},scopedSlots:e._u([{key:"default",fn:function(i){return[t("span",[e._v(e._s(i.row.updateDate))])]}}],null,!0)}):e._e()]}))],2),e._v(" "),t("div",{directives:[{name:"show",rawName:"v-show",value:e.grid&&!e.linkFailed&&!e.showShareCode,expression:"grid && !linkFailed && !showShareCode"},{name:"loading",rawName:"v-loading",value:e.tableLoading,expression:"tableLoading"}],attrs:{"element-loading-text":"文件加载中","element-loading-spinner":"el-icon-loading","element-loading-background":"#f6f7fa88"}},[t("div",{staticClass:"checkbox-group-header"},[t("van-checkbox",{staticClass:"grid-all-checkbox",on:{click:function(t){return e.clickGridAllCheckBox()}},model:{value:e.allChecked,callback:function(t){e.allChecked=t},expression:"allChecked"}},[e._v("\n        "+e._s(e.indexList.length>0?"已选择 "+this.tableHead[2].label:"选择")+"\n      ")]),e._v(" "),t("el-divider")],1),e._v(" "),t("van-checkbox-group",{ref:"checkboxGroup",on:{change:e.handleSelectionChange},model:{value:e.selectRowData,callback:function(t){e.selectRowData=t},expression:"selectRowData"}},[t("van-grid",{attrs:{square:"","column-num":e.gridColumnNum,gutter:10,border:!1}},e._l(e.fileList,(function(i,s){return t("van-grid-item",{key:i.id,ref:"gridItem",refInFor:!0},[t("div",{staticClass:"grid-time van-grid-item__content van-grid-item__content--center van-grid-item__content--square",style:{background:e.indexList.includes(s)?"#baebff91":"",cursor:e.indexList.length>0?"default":"pointer"},on:{mouseover:function(t){return e.gridItemHover(i,s)},mouseout:function(t){return e.gridItemOut(i,s)},click:function(t){return e.gridItemClick(i,t)},contextmenu:function(t){return t.preventDefault(),e.rowContextmenu(i)}}},[t("van-checkbox",{directives:[{name:"show",rawName:"v-show",value:e.gridHoverItemIndex===s||e.indexList.includes(s),expression:"gridHoverItemIndex === index || indexList.includes(index)"}],staticClass:"grid-item-checkbox",attrs:{name:i},on:{click:function(t){return t.stopPropagation(),e.clickGridItemCheckBox(i,s)}}}),e._v(" "),t("div",{staticClass:"grid-item-icon"},[e.sharer?t("icon-file",{attrs:{item:i,"image-url":e.imageUrl,"audio-cover-url":e.audioUrl,grid:!0,"grid-width":e.gridColumnWidth,public:!0}}):e._e()],1),e._v(" "),t("span",{staticClass:"grid-item-text"},[e._v(e._s(i.name))])],1)])})),1)],1)],1),e._v(" "),e.linkFailed&&!e.showShareCode?t("div",{staticClass:"share-header"},[""!==e.prompt?t("p",[e._v("温馨提示：")]):e._e(),e._v(" "),t("p",[e._v(e._s(e.prompt))])]):e._e(),e._v(" "),e.showShareCode?t("div",{staticClass:"share-content"},[t("div",{staticClass:"share-icon"},[e.sharer?t("icon-file",{staticClass:"share-icon-font",attrs:{item:e.shareData,grid:!0,details:!0,"image-url":e.imageUrl,"audio-cover-url":e.audioUrl}}):e._e()],1),e._v(" "),t("div",{staticClass:"share-filename"},[t("span",[e._v(e._s(e.shareData.fileName))])]),e._v(" "),t("div",{staticClass:"share-code"},[t("el-input",{attrs:{placeholder:"请输入提取码",clearable:""},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.validShareCode(e.extractionCode)}},model:{value:e.extractionCode,callback:function(t){e.extractionCode=t},expression:"extractionCode"}})],1),e._v(" "),t("div",{staticClass:"share-code-valid"},[t("el-button",{attrs:{type:"primary",disabled:0===e.extractionCode.length},on:{click:function(t){return e.validShareCode(e.extractionCode)}}},[e._v("\n        查看文件\n      ")])],1),e._v(" "),t("div",{staticClass:"share-expire-date"},[t("span",[e._v(e._s(e.shareData.expireDate?"到期时间："+e.shareData.expireDate:"永久有效"))])])]):e._e(),e._v(" "),t("sim-text-preview",{attrs:{file:e.textPreviewRow,shareId:e.shareId,status:e.textPreviewVisible},on:{"update:file":function(t){e.textPreviewRow=t},"update:status":function(t){e.textPreviewVisible=t}}}),e._v(" "),t("image-viewer",{attrs:{fileList:e.fileList,shareId:e.shareId,file:e.imagePreviewRow,status:e.imagePreviewVisible},on:{"update:status":function(t){e.imagePreviewVisible=t}}}),e._v(" "),t("video-preview",{attrs:{file:e.videoPreviewRow,shareId:e.shareId,status:e.videoPreviewVisible},on:{"update:status":function(t){e.videoPreviewVisible=t}}}),e._v(" "),t("office-preview",{attrs:{file:e.officePreviewRow,shareId:e.shareId,status:e.officePreviewVisible},on:{"update:status":function(t){e.officePreviewVisible=t}}}),e._v(" "),e.linkFailed||e.showShareCode?e._e():t("el-divider",{staticClass:"grid-divider",attrs:{"content-position":"center"}},[t("i",{staticClass:"el-icon-folder-opened"}),e._v(" "+e._s(e.summaries)+"\n  ")]),e._v(" "),t("el-pagination",{attrs:{background:"",layout:"prev, pager, next","hide-on-single-page":!0,"current-page":e.pagination.pageIndex,"page-sizes":e.pagination.pageSizes,"page-size":e.pagination.pageSize,total:e.pagination.total},on:{"update:currentPage":function(t){return e.$set(e.pagination,"pageIndex",t)},"update:current-page":function(t){return e.$set(e.pagination,"pageIndex",t)},"current-change":e.currentChange}})],1)},n=[],a=(i("f559"),i("a8f9")),o=(i("ac6a"),i("28a5"),i("20d6"),i("6f8e")),l=i("2f62"),r=i("7f29"),d=i("9dce"),c=i("5cfc"),u=i("573f"),h=i("0dcf"),g=function(){var e=this,t=e._self._c;return t("div",{staticClass:"loading"})},f=[],v={name:"AlLoading"},m=v,p=(i("21c1"),i("2877")),b=Object(p["a"])(m,g,f,!1,null,"913373be",null),w=b.exports,x=i("1000"),k=i("2d53"),C=i("1638"),L=i("ae1f"),_=i("140f"),I=i("2690"),y=i("b311"),S=i.n(y),D=i("fd35"),F=i("1383"),T=i("4360"),z={components:{Logo:F["a"],OfficePreview:D["a"],IconFile:h["a"],BreadcrumbFilePath:u["a"],AlLoading:w,AudioPreview:_["a"],VideoPreview:L["a"],ImageViewer:C["a"],SimTextPreview:k["a"]},data:function(){return{prompt:"文件分享已被撤销",isLoading:!0,fileMenuActive:"",path:this.$route.query.path,showNewFolder:!1,isShowNewFolder:!1,listModeSearch:!1,newFolderName:"新建文件夹",renameFileName:"",searchFileName:"",pathList:[],fileList:[],pagination:{fileId:!1,pageIndex:1,pageSize:256,total:0,pageSizes:[10,20,30,40,50]},indexList:[],clientHeight:500,tableHead:[{name:"",label:"",index:0},{name:"",label:"",index:1},{name:"name",label:"名称",sortable:!0,index:2},{name:"",label:"",index:3},{name:"",label:"",more:!0,index:4},{name:"size",label:"大小",sortable:!0,index:5},{name:"updateDate",label:"修改日期",sortable:!0,index:6}],isJustHideMenus:!1,menusIsMultiple:!1,menus:[],singleMenus:[{iconClass:"menu-open",label:"打开",operation:"open"},{iconClass:"menu-download",label:"下载",operation:"download"},{iconClass:"menu-fuzhi",label:"复制下载连接",operation:"copyDownloadUrl"}],singleMenusEdit:[{iconClass:"menu-open",label:"打开",operation:"open"},{iconClass:"menu-download",label:"下载",operation:"download"},{iconClass:"menu-fuzhi",label:"复制下载连接",operation:"copyDownloadUrl"}],multipleMenus:[{iconClass:"menu-download",label:"下载",operation:"download"}],multipleRightMenus:[{iconClass:"menu-download",label:"下载",operation:"download"}],rowContextData:{},selectRowData:[],tableLoading:!1,newFolderLoading:!1,renameLoading:!1,menuTriangle:"",cellMouseIndex:-1,editingIndex:-1,dialogMoveOrCopyVisible:!1,directoryTreeData:[],selectTreeNode:{},directoryTreeProps:{label:"name",children:"children",isLeaf:"isLeaf"},dragLoop:null,positionX:0,positionY:0,grid:!1,vmode:"list",gridColumnNum:-1,gridColumnWidth:120,gridHoverItemIndex:-1,gridHoverIntermediate:-1,allChecked:!1,summaries:"",shareDialog:!1,shareLink:"",shareFileName:"",generateShareLinkLoading:!0,shareId:this.$route.query.s,currentDirName:"",linkFailed:!0,textPreviewVisible:!1,textPreviewRow:{},imagePreviewRow:{},imagePreviewVisible:!1,videoPreviewRow:{},videoPreviewVisible:!1,officePreviewRow:{},officePreviewVisible:!1,audioPreviewRow:{},audioPreviewVisible:!1,showUpdateDateItem:this.$pc,showSizeItem:this.$pc,sharer:void 0,sharerAvatarUrl:"",netdiskName:"DSCloud",netdiskLogo:"",showShareCode:!1,shareData:{},extractionCode:""}},computed:Object(o["a"])(Object(o["a"])({},Object(l["b"])(["name"])),{},{netdiskLogo:function(){return this.$store.state.user.netdiskLogo?this.$store.state.user.netdiskLogo:""},imageUrl:function(){return void 0===this.$store.getters.shareToken?"".concat("/api","/public/s/view/thumbnail?id="):"".concat("/api","/public/s/view/thumbnail?share-token=").concat(this.$store.getters.shareToken,"&id=")},audioUrl:function(){return void 0===this.$store.getters.shareToken?"".concat("/api","/public/s/view/cover?name=").concat(this.sharer.username,"&id="):"".concat("/api","/public/s/view/cover?name=").concat(this.sharer.username,"&share-token=").concat(this.$store.getters.shareToken,"&id=")}}),created:function(){this.getFileList(),this.getSharer()},mounted:function(){var e=this;d["a"].$on("fileSuccess",(function(){e.getFileList()})),d["a"].$on("clickMore",(function(t){e.selectRowData=t,e.preliminaryRowData()})),window.history&&window.history.pushState&&(history.pushState(null,null,document.URL),window.addEventListener("popstate",this.goBack,!1));var t=this;window.onresize=function(){t.loadClientHeight()},this.$route.query.vmode&&(this.vmode=this.$route.query.vmode,this.grid="list"!==this.vmode)},destroyed:function(){window.removeEventListener("popstate",this.goBack,!1)},directives:{focus:{inserted:function(e){e.querySelector("input").focus()}},resize:{bind:function(e,t){var i="",s="";function n(){var n=document.defaultView.getComputedStyle(e);i===n.width&&s===n.height||t.value(),i=n.width,s=n.height}e.__vueSetInterval__=setInterval(n,300)},unbind:function(e){clearInterval(e.__vueSetInterval__)}}},methods:{loadClientHeight:function(){this.clientHeight=document.documentElement.clientHeight-200},gridItemHover:function(e,t){this.gridHoverItemIndex=t,this.gridHoverIntermediate=t},gridItemOut:function(e,t){this.gridHoverIntermediate=-1;var i=this;setTimeout((function(){i.gridHoverIntermediate!==i.gridHoverItemIndex&&(i.gridHoverItemIndex=-1)}),10)},clickGridItemCheckBox:function(e,t){this.indexList.includes(t)&&this.$refs.fileListTable.toggleRowSelection(e,!0)},clickGridAllCheckBox:function(){this.indexList.length!==this.fileList.length?this.$refs.checkboxGroup.toggleAll(!0):(this.$refs.checkboxGroup.toggleAll(),this.$refs.fileListTable.clearSelection())},gridItemClick:function(e,t){var i=t.path||t.composedPath&&t.composedPath(),s=i.findIndex((function(e){return"grid-item-checkbox van-checkbox"===e.className}));s>-1||(this.indexList.length<1?e.index!==this.editingIndex&&(this.fileClick(e),this.editingIndex=-1):this.indexList.includes(e.index)?this.$refs.fileListTable.toggleRowSelection(e,!1):this.$refs.fileListTable.toggleRowSelection(e,!0))},containerResize:function(){var e=document.querySelector(".dashboard-container").clientWidth;this.gridColumnNum=Math.round((e-10)/135),this.gridColumnWidth=(e-11*this.gridColumnNum)/this.gridColumnNum-4.5},formatTime:function(e){return Object(r["c"])(e)},formatSize:function(e){return Object(r["b"])(e)},goBack:function(){var e=this.pathList.length-3;this.handleLink(this.pathList[e],e)},handleLink:function(e,t){0===t&&(this.pathList.splice(this.pathList.findIndex((function(e,i){return i===t+1})),this.pathList.length-(t+1)),this.getFileList(null,!0),this.$router.push("/s?s=".concat(this.shareId,"&vmode=").concat(this.vmode))),e&&e.fileId&&(this.accessShareOpenDir(e.fileId),this.pathList.splice(this.pathList.findIndex((function(e,i){return i===t+1})),this.pathList.length-(t+1)))},changeVmode:function(){this.grid=!this.grid,this.vmode="list",this.grid&&(this.vmode="grid");this.$router.push("/s?s=".concat(this.shareId,"&vmode=").concat(this.vmode))},accessShareOpenDir:function(e){var t=this;this.tableLoading=!0,c["a"].accessShareOpenDir({share:this.shareId,fileId:e,pageIndex:this.pagination.pageIndex,pageSize:this.pagination.pageSize}).then((function(i){t.isLoading=!1,t.fileList=i.data,t.loadClientHeight(),t.listModeSearch=!0,t.pagination.fileId=e,t.pagination["total"]=i.count,t.$nextTick((function(){t.containerResize(),t.tableLoading=!1,t.linkFailed=!1}))})).catch((function(e){}))},getFileList:function(e,t){var i=this;this.tableLoading=!0,c["a"].accessShare({share:this.shareId,pageIndex:this.pagination.pageIndex,pageSize:this.pagination.pageSize}).then((function(s){i.isLoading=!1,Object.getPrototypeOf(s.data)===String.prototype?i.prompt="该链接已失效":(s.data.isPrivacy?(i.showShareCode=!0,i.shareData=s.data):(i.fileList=s.data,i.fileList.map((function(e,t){e.index=t}))),i.fileList.length>0&&!i.fileList[0].isPrivacy?T["a"].dispatch("user/resetShareToken").then((function(){i.loadShareFileList(e,t,s.count)})):i.loadShareFileList(e,t,s.count))})).catch((function(){i.tableLoading=!1,i.linkFailed=!0,i.isLoading=!1}))},loadShareFileList:function(e,t,i){var s=this;if(this.loadClientHeight(),this.listModeSearch=!1,this.listModeSearchOpenDir=!1,this.pagination["total"]=i,this.$nextTick((function(){s.containerResize(),s.tableLoading=!1,s.linkFailed=!1})),!e){var n=this.fileList[0].path.split("/");this.currentDirName=n[n.length-2]}this.$nextTick((function(){if(s.containerResize(),s.tableLoading=!1,s.linkFailed=!1,!e){var i={};i["folder"]=s.currentDirName,i["index"]=s.pathList.length,t||s.pathList.push(i)}}))},getSharer:function(){var e=this;c["a"].getSharer({shareId:this.shareId}).then((function(t){e.sharer=t.data,t.data&&(e.sharerAvatarUrl=window.location.origin+e.imageUrl+t.data.avatar,e.sharer.netdiskName&&(e.netdiskName=e.sharer.netdiskName),e.sharer.netdiskLogo&&(e.netdiskLogo=e.sharer.netdiskLogo),e.audioUrl="".concat("/api","/public/s/view/cover?name=").concat(e.sharer.username,"&id="),e.$store.dispatch("user/setLogo",{netdiskName:e.netdiskName,netdiskLogo:e.netdiskLogo}))}))},currentChange:function(e){this.pagination.pageIndex=e,this.pagination.fileId?this.accessShareOpenDir(this.pagination.fileId):this.getFileList(!0)},getSummaries:function(e){var t=[];return t[2]=this.getShowSumFileAndFolder(this.fileList),this.summaries=t[2],t},getShowSumFileAndFolder:function(e){var t=0,i=0,s=0;e.forEach((function(e){e.isFolder?t+=1:i+=1,s+=e.size}));var n="";t>0&&(n=t+"个文件夹");var a="";return i>0&&(a=i+"个文件"),n+" "+a+this.getShowSumSize(s)},getShowSumSize:function(e){var t="";return e>0&&(t="  共"),t+=e<1024?e+"B":e>=1024&&e<1048576?(e/1024).toFixed(2)+"K":e>=1048576&&e<1073741824?(e/1048576).toFixed(2)+"M":(e/1073741824).toFixed(2)+"G",t},handleSelectionChange:function(e){var t=this;this.selectRowData=e;var i=0;this.indexList=[];var s,n=Object(a["a"])(e);try{for(n.s();!(s=n.n()).done;){var o=s.value;i+=o.size,this.indexList.push(o.index)}}catch(g){n.e(g)}finally{n.f()}e.forEach((function(e){t.$refs.fileListTable.toggleRowSelection(e,!0)}));var l=this.tableHead[2],r=this.tableHead[4],d=this.tableHead[5],c=this.tableHead[6];if(this.selectRowData.length>0){var u=this.getShowSumFileAndFolder(e),h=this.getShowSumSize(i);l.label=u,l.sortable=!1,r.name="more",d.label=h,d.sortable=!1,c.label="",c.sortable=!1,this.menusIsMultiple=!0,this.rowContextData=e[0]}else l.label="名称",l.sortable=!0,r.name="",d.label="大小",d.sortable=!0,c.label="修改日期",c.sortable=!0;this.indexList.length===this.fileList.length?this.allChecked=!0:this.allChecked=!1},rowRed:function(e){e.row,e.column;var t=e.rowIndex,i=e.columnIndex;if(this.indexList.length<1&&2===i&&this.cellMouseIndex===t)return{cursor:"pointer",color:"#19ACF9"};for(var s=0;s<this.indexList.length;s++)if(t===this.indexList[s])return{backgroundColor:"#baebff91",cursor:"default"}},tableRowClassName:function(e){var t=e.row,i=e.rowIndex;t.index=i},preliminaryRowData:function(e){e&&(this.rowContextData=e);this.rowContextData.isFavorite},cellMouseEnter:function(e){-1===this.editingIndex&&this.indexList.length<1&&(this.cellMouseIndex=e.index)},cellMouseLeave:function(){this.cellMouseIndex=-1},cellClick:function(e,t){if(clearTimeout(this.Loop),-1===this.editingIndex){var i=t.index;0===i&&this.$refs.fileListTable.toggleRowSelection(e),2===i&&this.indexList.length<1&&e.index!==this.editingIndex&&(this.fileClick(e),this.editingIndex=-1),this.indexList.length>0&&i>0&&this.$refs.fileListTable.toggleRowSelection(e)}},moreOperation:function(e){this.menusIsMultiple=!0,this.menus=this.multipleMenus,this.showOperationMenus(e)},moreClick:function(e,t){this.menusIsMultiple=!1,e.contentType&&e.contentType.includes("text")?this.menus=this.singleMenusEdit:this.menus=this.singleMenus,this.preliminaryRowData(e),this.showOperationMenus(t)},rowContextmenu:function(e){this.indexList.includes(e.index)?(this.menusIsMultiple=!0,this.menus=this.multipleRightMenus):(this.menusIsMultiple=!1,e.contentType&&e.contentType.includes("text")?this.menus=this.singleMenusEdit:this.menus=this.singleMenus,this.preliminaryRowData(e)),event.preventDefault(),this.menuTriangle="";var t={};t.pageX=event.pageX+5,t.pageY=event.pageY+2,t.clientX=event.clientX+5,t.clientY=event.clientY+2,this.$refs.contextShow.showMenu(event)},showOperationMenus:function(e){var t={};document.body.scrollHeight-e.pageY>400?(this.menuTriangle="menu-triangle-top",t.pageX=e.pageX-78,t.pageY=e.pageY+30,t.clientX=e.clientX+78,t.clientY=e.clientY+30):(this.menuTriangle="menu-triangle-bottom",t.pageX=e.pageX-78,t.pageY=e.pageY-350,t.clientX=e.clientX+78,t.clientY=e.clientY-350),this.isJustHideMenus||this.$refs.contextShow.showMenu(t)},show:function(){},hide:function(){var e=this;this.isJustHideMenus=!0,setTimeout((function(){e.isJustHideMenus=!1}),100)},menusOperations:function(e){switch(e){case"open":this.fileClick(this.rowContextData);break;case"download":this.downloadFile();break;case"copyDownloadUrl":this.downloadFile(!0);break}this.$refs.contextShow.hideMenu()},downloadFile:function(e){var t=0;if(this.indexList.length>0?this.selectRowData.forEach((function(e){t+=e.size})):t=this.rowContextData.size,t>0){var i=[];if(this.menusIsMultiple?this.selectRowData.forEach((function(e){i.push(e.id)})):i.push(this.rowContextData.id),i.length>1||this.rowContextData.isFolder)return void(e?this.copyDownloadLink(I["a"].publicPackageDownloadUrl(this.shareId,i,this.$store.getters.shareToken)):I["a"].publicPackageDownload(this.shareId,i,this.$store.getters.shareToken));e?this.rowContextData.isShare?this.copyDownloadLink(window.location.origin+I["a"].previewUrl(this.sharer.username,this.rowContextData,void 0,this.$store.getters.shareToken)):this.copyDownloadLink(I["a"].publicPackageDownloadUrl(this.shareId,i,this.$store.getters.shareToken)):I["a"].publicDownload(this.shareId,this.rowContextData,this.$store.getters.shareToken)}else this.$message({message:"所选文件为空",type:"warning"})},copyDownloadLink:function(e){var t=this,i=new S.a(".menu-option",{text:function(){return e}});i.on("success",(function(e){t.$message({message:"复制成功",type:"success",duration:1e3}),i.destroy()})),i.on("error",(function(e){t.$message({message:"该浏览器不支持自动复制",type:"warning",duration:1e3}),i.destroy()}))},fileClick:function(e){if(window.shareId=this.shareId,e.isFolder){var t={};t["folder"]=e.name,t["fileId"]=e.id,t["index"]=this.pathList.length,this.pathList.push(t),this.pagination.pageIndex=1,this.$router.push("?s=".concat(this.shareId,"&vmode=").concat(this.vmode)),this.accessShareOpenDir(e.id)}else{if(e.contentType.startsWith("image"))return this.imagePreviewVisible=!0,void(this.imagePreviewRow=e);if(x["c"].simText.includes(e.suffix))return this.textPreviewRow=e,void(this.textPreviewVisible=!0);if(e.contentType.indexOf("video")>-1)return this.videoPreviewVisible=!0,void(this.videoPreviewRow=e);if(e.contentType.indexOf("audio")>-1)return void d["a"].$emit("onAddAudio",e,this.audioCoverUrl);if(e.contentType.indexOf("office")>-1||["pdf","csv","drawio","mind"].includes(e.suffix))return this.officePreviewVisible=!0,void(this.officePreviewRow=e);I["a"].publicPreview(e,this.shareId,this.$store.getters.shareToken)}},validShareCode:function(e){var t=this;this.$store.dispatch("user/validShareCode",{shareId:this.shareId,shareCode:e}).then((function(){t.showShareCode=!1,t.getFileList()}))}}},P=z,M=(i("1ef8"),Object(p["a"])(P,s,n,!1,null,"0c5bd3fa",null));t["default"]=M.exports},"5d88":function(e,t,i){var s={"./Favoritestarrate.svg":"ba29","./add-file.svg":"cb53","./audio.svg":"5b8d","./back.svg":"c557","./breadcrumb-right.svg":"16b5","./cancel-share.svg":"5c1e","./close.svg":"7710","./contents.svg":"6e48","./dashboard.svg":"f782","./docment.svg":"29ad","./document.svg":"fd28","./example.svg":"30c3","./eye-open.svg":"d7ec","./eye.svg":"4df5","./file-Ds-store.svg":"c5e8","./file-add.svg":"6ab0","./file-bat.svg":"d3b9","./file-class.svg":"b7ab","./file-cmake.svg":"4fee","./file-conf.svg":"fa5a","./file-cpp.svg":"33e1","./file-css.svg":"270b","./file-csv.svg":"8d1b","./file-dart.svg":"2f38","./file-db.svg":"d0a2","./file-dmg.svg":"a240","./file-docxf.svg":"393d","./file-drawio.svg":"6a4e","./file-excel.svg":"bd70","./file-exe.svg":"49f2","./file-factories.svg":"f3c5","./file-gitignore.svg":"47ff","./file-go.svg":"b909","./file-gradle.svg":"00d8","./file-gzip.svg":"bdb5","./file-h.svg":"5623","./file-html.svg":"e9ad","./file-idea.svg":"0ab8","./file-iso.svg":"70a9","./file-jar.svg":"fd7c","./file-java.svg":"2870","./file-js.svg":"6b09","./file-json.svg":"b7f1","./file-key.svg":"09e8","./file-log.svg":"1f55","./file-md.svg":"f421","./file-mind.svg":"5399","./file-ncm.svg":"60c7","./file-pdf.svg":"63f3","./file-pem.svg":"2afe","./file-php.svg":"13a8","./file-pkg.svg":"f4b7","./file-plist.svg":"77a2","./file-ppt.svg":"1d06","./file-properties.svg":"9339","./file-python.svg":"0c41","./file-shell.svg":"3f78","./file-swift.svg":"00b4","./file-tar.svg":"cf7d","./file-txt.svg":"374b","./file-upload.svg":"c9b7","./file-vue.svg":"2bc8","./file-word.svg":"5743","./file-xls.svg":"e6ed","./file-xml.svg":"e155","./file-xsl.svg":"7f33","./file-yml.svg":"3671","./file.svg":"b8b2","./folder-128.svg":"5911","./folder-add.svg":"2129","./folder-upload.svg":"c04d","./folder.svg":"d079","./form.svg":"eb1b","./fullscreen.svg":"9921","./gongxiangzhongxin.svg":"3886","./home.svg":"6bbe","./image.svg":"8736","./jmal-cloud.svg":"0340","./link.svg":"18f0","./loading-image-error.svg":"bd9b","./md-list.svg":"2edc4","./md.svg":"304e","./menu-addtab.svg":"2c60","./menu-ascending.svg":"d129","./menu-copy.svg":"f613","./menu-descending.svg":"8e8c","./menu-deselect.svg":"3a0f","./menu-details.svg":"8ec2","./menu-download.svg":"8d45","./menu-edit1.svg":"ce0b","./menu-empty.svg":"3d2e","./menu-favorite-hover.svg":"aeb7","./menu-favorite.svg":"f17e","./menu-grid.svg":"4195","./menu-list.svg":"7f6d","./menu-null.svg":"8707","./menu-open.svg":"00bd","./menu-point.svg":"c784","./menu-remove.svg":"910d","./menu-rename.svg":"f1ae","./menu-select.svg":"cdac","./menu-unfavorite-hover.svg":"83bf","./menu-unfavorite.svg":"b554","./menu-unselect.svg":"21bd","./more.svg":"3dd0","./nested.svg":"dcf8","./normalscreen.svg":"7a3a","./open-folder.svg":"03fd","./password.svg":"2a3d","./release.svg":"7186","./search.svg":"8e8d","./share.svg":"5306","./tab-favorite.svg":"4a51","./tab-folder.svg":"93d7","./tab-recently.svg":"44b8","./tab-setting.svg":"46d6","./table.svg":"47f1","./tree.svg":"93cd","./user.svg":"b3b5","./video.svg":"8f2b","./warring.svg":"c1c0","./widget-email.svg":"5863","./widget-github.svg":"ca9d","./widget-music.svg":"2e4a","./widget-subscription.svg":"fba5","./yes.svg":"8d65","./zip.svg":"8aa6","./ziyuan.svg":"adc6","./zuijinyuedu.svg":"d565"};function n(e){var t=a(e);return i(t)}function a(e){var t=s[e];if(!(t+1)){var i=new Error("Cannot find module '"+e+"'");throw i.code="MODULE_NOT_FOUND",i}return t}n.keys=function(){return Object.keys(s)},n.resolve=a,e.exports=n,n.id="5d88"},8702:function(e,t,i){},"98f0":function(e,t,i){},bc1a:function(e,t,i){e.exports=i.p+"static/img/infuse.50fcf44b.webp"},ed11:function(e,t,i){e.exports=i.p+"static/img/iina.7b2369eb.webp"}}]);