(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-9c161c3e"],{1e3:function(e,t,i){"use strict";i.d(t,"c",(function(){return a})),i.d(t,"b",(function(){return n})),i.d(t,"a",(function(){return o}));i("5df3"),i("f400"),i("ac6a");var s=i("33f9"),a={simText:["vue","asp","jsp","TXT","xml","xsl","iml","m","bas","prg","cmd","sass","sas","php","lst","key","pem","log","cmake","db","gradle","bat","conf","dart","plist"],compressedFile:["zip","tar","jar","tar.gz","tgz","tar.bz2"]};s["languages"].getLanguages().forEach((function(e){e.extensions.forEach((function(e){a.simText.push(e.substring(1,e.length))}))}));var n=["txt"],o=new Map;o.set("php","file-php"),o.set("js","file-js"),o.set("vue","file-vue"),o.set("xml","file-xml"),o.set("dart","file-dart"),o.set("html","file-html"),o.set("md","file-md"),o.set("txt","file-txt"),o.set("TXT","file-txt"),o.set("css","file-css"),o.set("scss","file-css"),o.set("java","file-java"),o.set("go","file-go"),o.set("DS_Store","file-Ds-store"),o.set("jar","file-jar"),o.set("properties","file-properties"),o.set("conf","file-conf"),o.set("factories","file-factories"),o.set("class","file-class"),o.set("excel","file-excel"),o.set("xls","file-excel"),o.set("xlsx","file-excel"),o.set("gitignore","file-gitignore"),o.set("ncm","file-ncm"),o.set("dmg","file-dmg"),o.set("pkg","file-pkg"),o.set("mpkg","file-pkg"),o.set("exe","file-exe"),o.set("word","file-word"),o.set("doc","file-word"),o.set("docx","file-word"),o.set("docxf","file-docxf"),o.set("ppt","file-ppt"),o.set("pptx","file-ppt"),o.set("drawio","file-drawio"),o.set("csv","file-csv"),o.set("pdf","file-pdf"),o.set("mind","file-mind"),o.set("zip","zip"),o.set("rar","zip"),o.set("iml","file-idea"),o.set("key","file-key"),o.set("pem","file-pem"),o.set("gz","file-gzip"),o.set("json","file-json"),o.set("tar","file-tar"),o.set("sh","file-shell"),o.set("log","file-log"),o.set("py","file-python"),o.set("cpp","file-cpp"),o.set("h","file-h"),o.set("xsl","file-xsl"),o.set("cmake","file-cmake"),o.set("db","file-db"),o.set("sql","file-db"),o.set("gradle","file-gradle"),o.set("bat","file-bat"),o.set("swift","file-swift"),o.set("yml","file-yml"),o.set("plist","file-plist"),o.set("iso","file-iso")},"1a40":function(e,t,i){"use strict";i.r(t);i("6762"),i("2fdb"),i("7f7f");var s=function(){var e=this,t=e._self._c;return t("div",{directives:[{name:"resize",rawName:"v-resize",value:e.containerResize,expression:"containerResize"}],staticClass:"container"},[t("van-popup",{style:{height:"100%",width:"35%"},attrs:{"get-container":"body",position:"left"},model:{value:e.leftMenuShow,callback:function(t){e.leftMenuShow=t},expression:"leftMenuShow"}},[t("div",{staticClass:"left-menu"},[t("div",{staticClass:"avatar"},[t("van-image",{attrs:{round:"",width:"5rem",height:"5rem",fit:"cover",src:e.imageUrl+e.avatar}})],1),e._v(" "),t("span",[e._v(e._s(e.name))]),e._v(" "),t("div",{staticClass:"classification"},[t("van-cell",{attrs:{title:"首页",icon:"wap-home-o"},on:{click:function(t){return e.clickFileType(null,{})}}}),e._v(" "),t("van-cell",{attrs:{title:"收藏",icon:"star-o"},on:{click:function(t){return e.clickFileType(null,{isFavorite:!0})}}}),e._v(" "),t("van-cell",{attrs:{title:"图片",icon:"photo-o"},on:{click:function(t){return e.clickFileType("image",{isFolder:!1})}}}),e._v(" "),t("van-cell",{attrs:{title:"视频",icon:"video-o"},on:{click:function(t){return e.clickFileType("video",{isFolder:!1})}}}),e._v(" "),t("van-cell",{attrs:{title:"音乐",icon:"music-o"},on:{click:function(t){return e.clickFileType("audio",{isFolder:!1})}}}),e._v(" "),t("van-cell",{attrs:{title:"文件传输",icon:"upgrade"},on:{click:e.uploadList}})],1),e._v(" "),t("div",{staticClass:"logout"},[t("van-button",{attrs:{round:"",type:"danger"},nativeOn:{click:function(t){return e.logout.apply(null,arguments)}}},[e._v("退出登录")])],1)])]),e._v(" "),t("van-list",{attrs:{finished:e.finished,"finished-text":e.statistics()},on:{load:function(t){e.searchStatus&&e.searchValue.length>0?e.searchFile(e.searchValue,!0):e.getFileList(!0)}},model:{value:e.loading,callback:function(t){e.loading=t},expression:"loading"}},[t("van-checkbox-group",{ref:"checkboxGroup",on:{change:e.checkboxChange},model:{value:e.selectRowData,callback:function(t){e.selectRowData=t},expression:"selectRowData"}},[t("van-cell-group",[t("van-sticky",{attrs:{"offset-top":-1}},[e.pathList.length<2&&!e.selectStatus?t("van-nav-bar",{style:e.vanNavBarClass,attrs:{title:"浏览","right-arrow":"","right-text":this.selectRowData.length!==this.fileList.length?"选择":"取消","left-arrow":""},on:{"click-right":e.checkboxAll,"click-left":e.leftMenu}},[t("div",{staticClass:"header-button",attrs:{slot:"left"},slot:"left"},[t("svg",{staticClass:"header-button-icon",attrs:{viewBox:"0 0 1024 1024",xmlns:"http://www.w3.org/2000/svg",width:"25",height:"25"}},[t("path",{attrs:{d:"M408 442h480c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8H408c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8zm-8 204c0 4.4 3.6 8 8 8h480c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8H408c-4.4 0-8 3.6-8 8v56zm504-486H120c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8h784c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8zm0 632H120c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8h784c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8zM142.4 642.1L298.7 519a8.84 8.84 0 0 0 0-13.9L142.4 381.9c-5.8-4.6-14.4-.5-14.4 6.9v246.3a8.9 8.9 0 0 0 14.4 7z"}})])])]):e._e(),e._v(" "),e.selectStatus?t("van-nav-bar",{style:e.vanNavBarClass,attrs:{title:0===e.selectRowData.length?"选择项目":e.selectRowData.length+"项","right-arrow":"","left-text":this.selectRowData.length!==this.fileList.length?"全选":"取消全选","right-text":"完成"},on:{"click-left":e.checkboxAll,"click-right":e.cancelSelect}}):e._e(),e._v(" "),e.pathList.length>=2&&!e.selectStatus?t("van-nav-bar",{style:e.vanNavBarClass,attrs:{title:e.pathList[e.pathList.length-1].folder,"right-text":this.selectRowData.length!==this.fileList.length?"选择":"取消","left-arrow":""},on:{"click-right":e.checkboxAll,"click-left":e.clickBack}},[t("div",{staticClass:"header-button",attrs:{slot:"left"},slot:"left"},[t("van-icon",{attrs:{name:"arrow-left"}})],1)]):e._e(),e._v(" "),t("div",{staticClass:"searchbar",style:e.searchBarClass},[t("van-search",{ref:"search",attrs:{"show-action":e.searchStatus,shape:"round",placeholder:"搜索"},on:{focus:e.startSearch,search:e.onSearch,input:e.onSearch},model:{value:e.searchValue,callback:function(t){e.searchValue=t},expression:"searchValue"}},[t("div",{attrs:{slot:"action"},on:{click:e.endSearch},slot:"action"},[e._v("取消")])])],1)],1),e._v(" "),t("van-cell",{staticStyle:{padding:"0 0 10px 0"},attrs:{center:!0}},[t("div",{staticClass:"operating-header"},[t("van-row",[t("van-col",{staticClass:"operating-header-col",attrs:{span:"4",align:"center",type:"flex"},on:{click:e.moreOperations}},[t("van-icon",{attrs:{name:"more-o"}})],1),e._v(" "),t("van-col",{staticClass:"operating-header-col",attrs:{span:"16",align:"center"},on:{click:e.showSortSheet}},[e._v("\n                已按"+e._s(e.actionsSortName)+"排序\n                "),t("van-icon",{staticClass:"sortable",attrs:{name:"arrow-"+e.sortOrder}})],1),e._v(" "),t("van-col",{staticClass:"operating-header-col",attrs:{span:"4",align:"center"},on:{click:e.changeVmode}},[t("van-icon",{style:e.grid?{}:{background:"#1989fa",color:"#ffffff",padding:"0 5px",borderRadius:"5px"},attrs:{name:"bars"}})],1)],1)],1)]),e._v(" "),e.searchStatus&&e.searchValue.length>0&&e.fileList.length>0?t("van-cell",{staticStyle:{"background-color":"#f7f8fa"}},[t("div",{staticClass:"search-result"},[e._v(e._s(e.resultCount)+"个结果")])]):e._e(),e._v(" "),e.searchStatus&&e.searchValue.length>0&&0===e.fileList.length?t("van-cell",[t("div",{staticClass:"search-result-no"},[e._v("无结果")])]):e._e(),e._v(" "),e.loading||0!==e.fileList.length?e._e():t("van-empty",{attrs:{description:"空空如也"}}),e._v(" "),e._l(e.fileList,(function(i,s){return e.grid?e._e():t("van-cell",{key:i.id,staticClass:"list-item",style:{background:e.selectIndexList.includes(s)?"#90c2fcb5":""},attrs:{center:"","is-link":i.isFolder},on:{click:function(t){return e.fileClick(i,s)}}},[t("div",{staticClass:"list-item-div",on:{touchstart:function(t){return e.touchStart(i)},touchend:e.touchEnd,touchmove:e.touchMove}},[t("van-row",{staticClass:"row-file"},[t("van-col",{staticClass:"list-cell-icon",attrs:{span:"4",align:"center"}},[t("icon-file",{attrs:{item:i,"image-url":e.imageUrl,"audio-cover-url":e.audioCoverUrl}})],1),e._v(" "),t("van-col",{staticClass:"list-item-content",attrs:{span:"16"}},[t("van-col",{attrs:{span:"24"}},[e._v("\n                  "+e._s(i.name)+"\n                ")]),e._v(" "),t("van-col",{staticClass:"file-description",attrs:{span:"24",justify:"space-between"}},[t("van-col",{attrs:{span:"24"}},[e._v("\n                    "+e._s(e.formatTime(i.agoTime))+"   "+e._s(e.formatSize(i.size))+"\n                  ")])],1)],1),e._v(" "),t("van-col",{attrs:{span:"4"}})],1)],1),e._v(" "),!e.grid&&e.selectStatus?t("van-checkbox",{ref:"checkboxes",refInFor:!0,staticClass:"file-item-checkbox",attrs:{slot:"right-icon",name:i},slot:"right-icon"}):e._e()],1)})),e._v(" "),e.grid?t("van-grid",{style:{width:"100%",overflow:"auto"},attrs:{square:"",center:!0,"column-num":e.gridColumnNum,gutter:10,border:!1}},e._l(e.fileList,(function(i,s){return t("van-grid-item",{key:i.id,ref:"gridItem",refInFor:!0,staticClass:"parent-grid-item",on:{click:function(t){return e.fileClick(i,s)}}},[t("div",{staticClass:"grid-time van-grid-item__content van-grid-item__content--center van-grid-item__content--square",style:{background:e.selectIndexList.includes(s)?"#90c2fcb5":"","border-radius":"15px"},on:{touchstart:function(t){return e.touchStart(i)},touchend:e.touchEnd,touchmove:e.touchMove}},[e.grid&&e.selectStatus?t("van-checkbox",{ref:"checkboxes",refInFor:!0,staticClass:"file-item-checkbox",attrs:{slot:"right-icon",name:i},slot:"right-icon"}):e._e(),e._v(" "),t("div",{staticClass:"grid-item-icon"},[t("icon-file",{attrs:{item:i,"image-url":e.imageUrl,"audio-cover-url":e.audioCoverUrl,grid:!0}})],1),e._v(" "),t("span",{staticClass:"grid-item-text",attrs:{title:i.name}},[e._v(e._s(i.name))])],1)])})),1):e._e()],2)],1)],1),e._v(" "),t("van-action-sheet",{attrs:{actions:e.actionsMenus,"cancel-text":"取消"},on:{cancel:e.onCancel,select:e.selectActionsMenus},model:{value:e.actionSheetShow,callback:function(t){e.actionSheetShow=t},expression:"actionSheetShow"}}),e._v(" "),t("van-action-sheet",{attrs:{actions:e.actionsSortMenus,"cancel-text":"取消",description:"排序方式"},on:{cancel:e.onCancel,select:e.selectSortActionsMenus},model:{value:e.actionSortSheetShow,callback:function(t){e.actionSortSheetShow=t},expression:"actionSortSheetShow"}}),e._v(" "),t("van-dialog",{attrs:{"show-cancel-button":""},on:{confirm:e.newFolderNameClick},model:{value:e.showNewFolder,callback:function(t){e.showNewFolder=t},expression:"showNewFolder"}},[t("van-field",{ref:"newFolderInput",staticClass:"new-folder-input",attrs:{placeholder:"请输入文件夹名称",border:!0,clearable:!0,autofocus:!0},model:{value:e.newFolderName,callback:function(t){e.newFolderName=t},expression:"newFolderName"}})],1),e._v(" "),t("van-dialog",{attrs:{"show-cancel-button":""},on:{confirm:function(t){return e.rowRename()}},model:{value:e.showRename,callback:function(t){e.showRename=t},expression:"showRename"}},[t("van-field",{ref:"renameInput",staticClass:"rename-input",attrs:{placeholder:"请输入文件名称",border:!0,clearable:!0,autofocus:!0},model:{value:e.renameFileName,callback:function(t){e.renameFileName=t},expression:"renameFileName"}})],1),e._v(" "),t("e-vue-contextmenu",{ref:"contextShow",staticClass:"newFileMenu",on:{"ctx-show":e.show,"ctx-hide":e.hide}},e._l(e.menus,(function(i,s){return t("ul",{key:i.label,class:{"menu-list-first":0===s,"menu-list-last":s===e.menus.length-1,"menu-list":s<e.menus.length-1&&s>0}},[0!==s?t("div",{staticStyle:{"border-bottom":"1px solid #cccccc85"}}):e._e(),e._v(" "),t("li",{class:{remove:"remove"===i.operation},on:{click:function(t){return e.menusOperations(i.operation)}}},[t("div",{staticClass:"menuitem"},[t("svg-icon",{attrs:{"icon-class":i.iconClass}}),e._v(" "),t("span",{staticClass:"menuitem text"},[e._v(e._s(i.label))])],1)])])})),0),e._v(" "),t("van-overlay",{ref:"overlayShow",attrs:{show:e.overlayShow,duration:"0.3"},on:{click:e.overlayClick}},[null==e.rowContextData.name||e.grid?e._e():t("van-cell",{staticClass:"list-item overlay-content-class",style:e.overlayContentClass,attrs:{center:"","is-link":e.rowContextData.isFolder}},[t("div",[t("van-row",{staticClass:"row-file"},[t("van-col",{staticClass:"list-cell-icon",attrs:{span:"4",align:"center"}},[t("icon-file",{attrs:{item:e.rowContextData,"image-url":e.imageUrl}})],1),e._v(" "),t("van-col",{staticClass:"list-item-content",attrs:{span:"16"}},[t("van-col",{attrs:{span:"24"}},[e._v("\n              "+e._s(e.rowContextData.name)+"\n            ")]),e._v(" "),t("van-col",{staticClass:"file-description",attrs:{span:"24",justify:"space-between"}},[t("van-col",{attrs:{span:"24"}},[e._v("\n                "+e._s(e.formatTime(e.rowContextData.agoTime))+"   "+e._s(e.formatSize(e.rowContextData.size))+"\n              ")])],1)],1),e._v(" "),t("van-col",{attrs:{span:"4"}})],1)],1),e._v(" "),e.selectStatus?t("van-checkbox",{staticClass:"file-item-checkbox",attrs:{slot:"right-icon",name:e.rowContextData},slot:"right-icon",model:{value:e.isShowCheckContext,callback:function(t){e.isShowCheckContext=t},expression:"isShowCheckContext"}}):e._e()],1),e._v(" "),null!=e.rowContextData.name&&e.grid?t("div",{staticClass:"grid-time overlay-content-class van-grid-item__content van-grid-item__content--center van-grid-item__content--square",style:e.overlayContentClass},[e.selectStatus?t("van-checkbox",{staticClass:"file-item-checkbox",attrs:{slot:"right-icon",name:e.rowContextData},slot:"right-icon",model:{value:e.isShowCheckContext,callback:function(t){e.isShowCheckContext=t},expression:"isShowCheckContext"}}):e._e(),e._v(" "),t("div",{staticClass:"grid-item-icon"},[t("icon-file",{attrs:{item:e.rowContextData,"image-url":e.imageUrl,"audio-cover-url":e.audioCoverUrl,grid:!0}})],1),e._v(" "),t("span",{staticClass:"grid-item-text",attrs:{title:e.rowContextData.name}},[e._v(e._s(e.rowContextData.name))])],1):e._e()],1),e._v(" "),t("sim-text-preview",{attrs:{file:e.textPreviewRow,status:e.textPreviewVisible},on:{"update:file":function(t){e.textPreviewRow=t},"update:status":function(t){e.textPreviewVisible=t}}}),e._v(" "),t("image-viewer",{attrs:{fileList:e.fileList,file:e.imagePreviewRow,status:e.imagePreviewVisible},on:{"update:status":function(t){e.imagePreviewVisible=t}}}),e._v(" "),t("video-preview",{attrs:{file:e.videoPreviewRow,status:e.videoPreviewVisible},on:{"update:status":function(t){e.videoPreviewVisible=t}}}),e._v(" "),t("office-preview",{attrs:{file:e.officePreviewRow,status:e.officePreviewVisible},on:{"update:status":function(t){e.officePreviewVisible=t}}})],1)},a=[],n=(i("f559"),i("a8f9")),o=(i("55dd"),i("386d"),i("1a0e")),r=(i("96cf"),i("97bf")),l=(i("20d6"),i("aef6"),i("7514"),i("28a5"),i("ac6a"),i("6f8e")),c=i("2f62"),h=i("7f29"),u=i("26a1"),d=i("5cfc"),f=i("0dcf"),v=i("9dce"),g=i("2690"),m=i("1638"),p=i("ae1f"),w=i("2d53"),b=i("1000"),x=i("fd35"),C=(i("d958"),{components:{OfficePreview:x["a"],SimTextPreview:w["a"],VideoPreview:p["a"],ImageViewer:m["a"],IconFile:f["a"]},computed:Object(l["a"])({},Object(c["b"])(["name","avatar"])),data:function(){return{test:0,lastTabbarOffsetTop:0,diffTabbarTop:0,isiPhoneX:0,imageUrl:"".concat("/api","/view/thumbnail?jmal-token=").concat(this.$store.state.user.token,"&name=").concat(this.$store.state.user.name,"&id="),audioCoverUrl:"".concat("/api","/view/cover?jmal-token=").concat(this.$store.state.user.token,"&name=").concat(this.$store.state.user.name,"&id="),tabActive:0,path:this.$route.query.path,fileList:[],pathList:[{folder:"",index:0},{folder:"+",index:1}],pagination:{pageIndex:0,pageSize:50,total:0},queryFileType:null,queryCondition:{isFolder:null},loading:!1,finished:!1,refreshing:!1,actionSheetShow:!1,actionsMenus:[{name:"新建文件夹"}],actionSortSheetShow:!1,actionsSortMenus:[{name:"名称"},{name:"日期"},{name:"大小"}],actionsSortName:"名称",showNewFolder:!1,showRename:!1,newFolderName:"新建文件夹",Loop:null,isJustHideMenus:!1,menus:[{iconClass:"menu-select",label:"选择",operation:"select"},{iconClass:"menu-favorite",label:"收藏",operation:"favorite"},{iconClass:"menu-rename",label:"重命名",operation:"rename"},{iconClass:"menu-copy",label:"移动或复制",operation:"copy"},{iconClass:"menu-download",label:"下载",operation:"download"},{iconClass:"menu-remove",label:"删除",operation:"remove"}],rowContextData:{},selectRowData:[],checkboxGroup:[],newFolderLoading:!1,renameLoading:!1,renameFileName:"",selectIndexList:[],selectStatus:!1,isShowCheckContext:!1,overlayShow:!1,overlayContentClass:{},vanNavBarClass:{},searchBarClass:{},leftMenuShow:!1,searchValue:"",searchStatus:!0,resultCount:0,sortOrder:"up",sortableProp:null,order:null,grid:!1,vmode:"list",gridColumnNum:-1,imagePreviewRow:{},imagePreviewVisible:!1,videoPreviewRow:{},videoPreviewVisible:!1,officePreviewRow:{},officePreviewVisible:!1,textPreviewVisible:!1,textPreviewRow:{}}},directives:{resize:{bind:function(e,t){var i="",s="";function a(){var a=document.defaultView.getComputedStyle(e);i===a.width&&s===a.height||t.value(),i=a.width,s=a.height}e.__vueSetInterval__=setInterval(a,300)},unbind:function(e){clearInterval(e.__vueSetInterval__)}}},mounted:function(){var e=this;if(this.$route.query.vmode&&(this.vmode=this.$route.query.vmode,"list"===this.vmode?this.grid=!1:this.grid=!0),"/"!==this.$route.query.path){var t=decodeURI(this.$route.query.path);this.pathList.splice(1,1),t.split("/").forEach((function(t,i){if(i>0){var s={};s["folder"]=t,s["index"]=i,e.pathList.push(s)}}))}window.history&&window.history.pushState&&(history.pushState(null,null,document.URL),window.addEventListener("popstate",this.goBack,!1))},destroyed:function(){window.removeEventListener("popstate",this.goBack,!1)},methods:{highlightFavorite:function(e,t){var i=this.menus.find((function(e){if("favorite"===e.operation||"unFavorite"===e.operation)return e}));i&&(e?(i.label="取消收藏",i.iconClass="menu-unfavorite-hover",i.operation="unFavorite"):(i.iconClass=t?"menu-favorite-hover":"menu-favorite",i.label="收藏",i.operation="favorite"))},show:function(){},hide:function(){var e=this;this.isJustHideMenus=!0,setTimeout((function(){e.isJustHideMenus=!1}),100)},showCheckContext:function(){return this.selectIndexList.includes(this.rowContextData.index)},rowContextmenu:function(e,t,i){if(this.selectStatus&&this.selectIndexList.includes(e.index)){if(this.selectIndexList.includes(e.index)){var s={iconClass:"menu-unselect",label:"取消选择",operation:"unselect"};this.menus.splice(0,1,s)}}else{var a={iconClass:"menu-select",label:"选择",operation:"select"};this.menus.splice(0,1,a)}this.preliminaryRowData(e);var n=Object(u["b"])(t)-e.scrollY,o={};n+t.offsetHeight/2>document.body.offsetHeight/2?(o.pageX=i,o.pageY=Object(u["b"])(t)-47*this.menus.length+5):(o.pageX=i,o.pageY=Object(u["b"])(t)+t.offsetHeight+5),this.$refs.contextShow.showMenu(o)},preliminaryRowData:function(e){this.rowContextData=e,this.isShowCheckContext=this.selectIndexList.includes(e.index);var t=this.rowContextData.isFavorite;this.highlightFavorite(t,!1)},menusOperations:function(e){var t=this,i=this;switch(e){case"favorite":this.favoriteOperating(!0);break;case"open":this.fileClick(this.rowContextData,this.rowContextData.index);break;case"unselect":var s=this.rowContextData.index;this.$refs.checkboxes[s].toggle();break;case"unFavorite":this.favoriteOperating(!1);break;case"select":this.selectStatus=!0,this.selectIndexList.push(this.rowContextData.index),setTimeout((function(){t.$refs.checkboxes[i.rowContextData.index].toggle()}),0);break;case"rename":this.renameFileName=this.rowContextData.name,this.showRename=!0,setTimeout((function(){i.$refs.renameInput.focus()}),0);break;case"copy":vant.Toast("暂不支持移动");break;case"download":this.downloadFile();break;case"remove":this.deleteFile();break}this.overlayShow=!1,document.documentElement.style.overflow=null,this.$refs.contextShow.hideMenu()},rowRename:function(){var e=this,t=this.rowContextData,i=this.renameFileName;if(i){if(!t.isFolder){var s="."+t.suffix;i.endsWith(s)||(i+=s)}this.renameLoading=!0;var a=this.fileList.findIndex((function(e){if(i===e.name)return e}));if(a>-1){var n="该文件已存在";return t.isFolder&&(n="该文件夹已存在"),this.$message({message:n,type:"warning"}),void(this.renameLoading=!1)}d["a"].rename({newFileName:encodeURI(i),username:this.$store.state.user.name,id:t.id}).then((function(){e.renameLoading=!1,t.name=i,e.fileList[t.index]=t,e.editingIndex=-1}))}else this.editingIndex=-1},downloadFile:function(){var e=0;if(this.selectRowData.length>0?this.selectRowData.forEach((function(t){e+=t.size})):e+=this.rowContextData.size,e>0){var t=[];if(this.selectRowData.length>0?this.selectRowData.forEach((function(e){t.push(e.id)})):t.push(this.rowContextData.id),t.length>1||this.rowContextData.isFolder)return void g["a"].packageDownload(t,this.$store.state.user.token,this.$store.state.user.name);g["a"].download(this.$store.state.user.name,this.rowContextData,this.$store.state.user.token)}else this.$message({message:"所选文件夹为空",type:"warning"})},favoriteOperating:function(e){this.rowContextData.isFavorite=e,this.highlightFavorite(e,!0),d["a"].favoriteUrl({fileIds:this.rowContextData.id,isFavorite:e}).then((function(e){}))},deleteFile:function(){var e=this,t=[],i=[];this.selectRowData.length>0?(t=this.selectRowData,this.selectRowData.forEach((function(e){i.push(e.id)}))):(t=this.selectRowData,i.push(this.rowContextData.id));var s=this.getShowSumFileAndFolder(t);vant.Dialog.confirm({title:"提示",message:"此操作将永久删除"+s+", 是否继续?"}).then((function(){d["a"].delete({currentDirectory:e.rowContextData.path,username:e.$store.state.user.name,fileIds:i}).then((function(){e.getFileList(),vant.Toast.setDefaultOptions({duration:800}),vant.Toast.success("删除成功"),e.selectRowData.length>1&&(e.selectRowData=[])}))}))},touchMove:function(){clearTimeout(this.Loop)},touchStart:function(e){var t=this;clearTimeout(this.Loop);var i=window.event;this.Loop=setTimeout((function(){e.scrollY=i.targetTouches[0].pageY-i.targetTouches[0].clientY,t.findListItem(e,i.targetTouches[0].target,i.targetTouches[0].clientX)&&(t.overlayShow=!0,document.documentElement.style.overflow="hidden")}),500)},touchEnd:function(){clearTimeout(this.Loop)},overlayClick:function(){this.overlayShow=!1,document.documentElement.style.overflow=null},findListItem:function(e,t,i){if(null===t)return!1;var s=t.offsetParent,a=t.parentElement;if(!s&&a||null===s)return this.findListItem(e,t.parentElement,i);if(s.className.indexOf("list-item")>-1)this.longPressDisplayLayer(e,s,i);else{if(!(s.className.indexOf("grid-time")>-1))return this.findListItem(e,t.offsetParent,i);this.longPressDisplayLayer(e,s,i)}return!0},longPressDisplayLayer:function(e,t,i){var s=this,a=this.selectIndexList.includes(this.rowContextData.index)?"#90c2fcb5":"";this.overlayContentClass={top:Object(u["b"])(t)-e.scrollY+"px",height:t.offsetHeight+"px",width:t.offsetWidth+"px",left:Object(u["a"])(t)+"px","border-radius":"0px",background:a},setTimeout((function(){s.overlayContentClass={top:Object(u["b"])(t)-e.scrollY+"px",height:t.offsetHeight+"px",width:t.offsetWidth-(s.grid?0:10)+"px",left:Object(u["a"])(t)+(s.grid?0:5)+"px","border-radius":"20px",background:a}}),0),this.rowContextmenu(e,t,i)},goBack:function(){this.pathList.length<=1?this.$router.push("/_m?vmode=".concat(this.vmode,"&path=").concat(encodeURI(this.path))):this.clickBack()},clickBack:function(){this.handleLink(this.pathList[this.pathList.length-2],this.pathList.length-2)},leftMenu:function(){this.leftMenuShow=!0},logout:function(){var e=Object(r["a"])(Object(o["a"])().mark((function e(){return Object(o["a"])().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this.$store.dispatch("user/logout");case 2:this.$router.push("/login?redirect=".concat(this.$route.fullPath));case 3:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}(),startSearch:function(){this.vanNavBarClass={visibility:"hidden"},this.searchBarClass={marginTop:"-30px"};var e=document.querySelector(".van-search__action");e.style.marginRight="0px",e.style.visibility="visible",e.style.color="#1989fa"},endSearch:function(){var e=this;setTimeout((function(){e.vanNavBarClass={visibility:"visible"}}),150),this.searchBarClass={marginTop:"0px"};var t=document.querySelector(".van-search__action");t.style.marginRight="-44px",t.style.visibility="hidden",this.searchValue="",this.getFileList()},onSearch:function(){this.searchValue.length<1?this.getFileList():this.searchFile(this.searchValue)},changeVmode:function(){this.grid=!this.grid,this.vmode="list",this.grid&&(this.vmode="grid"),this.path||(this.path=""),this.$router.push("?vmode=".concat(this.vmode,"&path=").concat(this.path))},showSortSheet:function(){this.actionSortSheetShow=!0},moreOperations:function(){if(this.actionSheetShow=!0,this.actionsMenus=[{name:"新建文件夹"}],window.uploader.support){var e={name:"上传文件"};this.actionsMenus.push(e)}if(window.uploader.supportDirectory){var t={name:"上传文件夹"};this.actionsMenus.push(t)}},handleLink:function(e,t,i,s){var a=this;e&&e.search?(e.searchKey?this.searchFileByKeyWord(e.searchKey):e.row&&this.searchFileAndOpenDir(e.row),this.pathList.splice(this.pathList.findIndex((function(e,i){return i===t+1})),this.pathList.length-(t+1))):(this.pathList.splice(this.pathList.findIndex((function(e,i){return i===t+1})),this.pathList.length-(t+1)),this.pathList.forEach((function(e,t){0===t?a.path="":t===a.pathList.length||(a.path+="/"+a.pathList[t].folder)})),i||(this.$route.query.path,this.$router.push("/_m?vmode=".concat(this.vmode,"&path=").concat(encodeURI(this.path)))),s||(this.pagination.pageIndex=1,this.getFileList()))},formatTime:function(e){return Object(h["c"])(e)},formatSize:function(e){return Object(h["b"])(e)},onRefresh:function(){this.finished=!1,this.loading=!0,this.getFileList()},getFileList:function(e){var t=this;console.log("getFileList",e),this.beforeLoadData(e),d["a"].fileList({username:this.$store.state.user.name,userId:this.$store.state.user.userId,currentDirectory:encodeURI(this.$route.query.path),queryFileType:this.queryFileType,sortableProp:this.sortableProp,order:this.order,isFolder:this.queryCondition.isFolder,isFavorite:this.queryCondition.isFavorite,queryCondition:this.queryCondition,pageIndex:this.pagination.pageIndex,pageSize:this.pagination.pageSize}).then((function(i){t.loadData(i,e)})).catch((function(e){}))},searchFile:function(e,t){var i=this;e&&(this.beforeLoadData(t),this.$router.push("?vmode=".concat(this.vmode,"&search-file=").concat(e)),d["a"].searchFile({userId:this.$store.state.user.userId,username:this.$store.state.user.name,keyword:e,currentDirectory:encodeURI(this.$route.query.path),pageIndex:this.pagination.pageIndex,pageSize:this.pagination.pageSize}).then((function(e){i.loadData(e,t),i.path="",i.listModeSearch=!0,i.listModeSearchOpenDir=!1})))},beforeLoadData:function(e){e?this.pagination.pageIndex++:this.pagination.pageIndex=1,this.finished=!1,this.fileList=[]},loadData:function(e,t){var i=this;t?e.data.forEach((function(e,t){e["index"]=(i.pagination.pageIndex-1)*i.pagination.pageSize+t,i.fileList.push(e)})):(this.fileList=e.data,this.fileList.map((function(e,t){e["index"]=t}))),this.refreshing=!1,this.resultCount=e.count,this.fileList.length>=e.count&&(this.finished=!0),this.fileList.sort(this.compare(this.sortableProp)),this.$nextTick((function(){i.containerResize(),i.loading=!1}))},containerResize:function(){var e=document.querySelector(".container"),t=e.clientWidth;t>1024?this.gridColumnNum=Math.round(t/100-4):(this.gridColumnNum=Math.round(t/100-2),t<=550&&(this.gridColumnNum=4),t<=375&&(this.gridColumnNum=3))},clickFileType:function(e,t){this.queryCondition=t,this.queryFileType=e,this.getFileList(),this.leftMenuShow=!1},uploadList:function(){this.$router.push("/upload/index_m")},statistics:function(){var e=0;return this.fileList.forEach((function(t){e+=t.size})),this.getShowSumFileAndFolder(this.fileList)+" "+this.getShowSumSize(e)},getShowSumFileAndFolder:function(e){var t=0,i=0;e.forEach((function(e){e.isFolder?t+=1:i+=1}));var s="";t>0&&(s=t+"个文件夹");var a="";return i>0&&(a=i+"个文件"),s+" "+a},getShowSumSize:function(e){var t="";return e>0&&(t="  共"),0===e||(t+=e<1024?e+"B":e>=1024&&e<1048576?(e/1024).toFixed(2)+"K":e>=1048576&&e<1073741824?(e/1048576).toFixed(2)+"M":(e/1073741824).toFixed(2)+"G"),t},checkboxAll:function(){this.selectRowData.length!==this.fileList.length?this.$refs.checkboxGroup.toggleAll(!0):this.$refs.checkboxGroup.toggleAll()},cancelSelect:function(){this.$refs.checkboxGroup.toggleAll(!1);var e=this;setTimeout((function(){e.selectStatus=!1}))},checkboxChange:function(e){this.selectRowData=e,this.selectIndexList=[];var t,i=Object(n["a"])(e);try{for(i.s();!(t=i.n()).done;){var s=t.value;this.selectIndexList.push(s.index)}}catch(a){i.e(a)}finally{i.f()}this.selectStatus=!0},fileClick:function(e,t){var i=this;if(this.selectStatus)this.$refs.checkboxes[t].toggle();else if(e.isFolder){this.path?this.path+="/"+e.name:this.path="/"+e.name;var s={};s["folder"]=e.name,s["index"]=this.pathList.length-1,this.pathList.push(s),this.$router.push("/_m?vmode=".concat(this.vmode,"&path=").concat(encodeURI(this.path))),this.getFileList()}else{if(e.contentType.startsWith("image"))return this.imagePreviewVisible=!0,void(this.imagePreviewRow=e);if(b["c"].simText.includes(e.suffix))return this.textPreviewRow=e,void(this.textPreviewVisible=!0);if(e.contentType.indexOf("video")>-1)return this.videoPreviewVisible=!0,void(this.videoPreviewRow=e);if(e.contentType.indexOf("audio")>-1)return void v["a"].$emit("onAddAudio",e,this.audioCoverUrl);if(e.contentType.indexOf("office")>-1||"csv"===e.suffix)return this.officePreviewVisible=!0,void(this.officePreviewRow=e);if("pdf"===e.suffix)return void g["a"].preview(this.$store.state.user.name,e,this.$store.getters.token);vant.Dialog.confirm({title:"标题",message:"此文件不支持预览，是否下载",confirmButtonText:"下载"}).then((function(){setTimeout((function(){g["a"].download(i.$store.state.user.name,e,i.$store.state.user.token)}),0)})).catch((function(){}))}},onCancel:function(){this.actionSheetShow=!1,this.actionSortSheetShow=!1},compare:function(e){var t=this;return function(i,s){var a=i[e],n=s[e];return"ascending"===t.order?a-n:n-a}},selectSortActionsMenus:function(e){var t=this;setTimeout((function(){t.actionSortSheetShow=!1}),100),"up"===this.sortOrder?(this.sortOrder="down",this.order="descending"):(this.sortOrder="up",this.order="ascending"),this.actionsSortName=e.name,"名称"===e.name&&(this.sortableProp="name","up"===this.sortOrder&&(this.order=null),this.getFileList()),"大小"===e.name&&(this.sortableProp="size",this.fileList.sort(this.compare(this.sortableProp))),"日期"===e.name&&(this.sortableProp="updateDate",this.getFileList())},selectActionsMenus:function(e){var t=this;if(setTimeout((function(){t.actionSheetShow=!1}),100),"新建文件夹"===e.name){this.newFolderName="新建文件夹";var i=0,s=[];this.fileList.forEach((function(e){s.push(e.name)}));while(s.includes(this.newFolderName))i+=1,this.newFolderName="新建文件夹"+i;this.showNewFolder=!0;var a=this;setTimeout((function(){a.$refs.newFolderInput.focus()}),0)}"上传文件"===e.name&&v["a"].$emit("openUploader",{currentDirectory:encodeURI(this.path),username:this.$store.state.user.name,userId:this.$store.state.user.userId}),"上传文件夹"===e.name&&v["a"].$emit("uploadFolder",{currentDirectory:encodeURI(this.path),username:this.$store.state.user.name,userId:this.$store.state.user.userId})},newFolderNameClick:function(){var e=this;this.newFolderLoading=!0,this.newFolderName?d["a"].uploadFolder({isFolder:!0,filename:encodeURI(this.newFolderName),currentDirectory:encodeURI(this.path),username:this.$store.state.user.name,userId:this.$store.state.user.userId}).then((function(t){1===t.data?(e.newFolderLoading=!1,e.$message({message:"该文件夹已存在",type:"warning"})):(e.newFolderLoading=!1,e.showNewFolder=!1,e.isShowNewFolder=!1,Notify({type:"success",message:"新建文件夹成功",duration:1e3}),e.listModeSearch?e.getFileListBySearchMode():e.getFileList())})):(this.newFolderLoading=!1,this.$message({message:"请输入文件夹名称",type:"warning"}))},swipeUp:function(){this.test=10},tabBottom:function(){return{padding:"0 0 20px 0"}}}}),y=C,k=(i("ec66"),i("2877")),S=Object(k["a"])(y,s,a,!1,null,"6dc95b4d",null);t["default"]=S.exports},"1b2a":function(e,t,i){e.exports=i.p+"static/img/nplayer.b0c2d9c9.webp"},"26a1":function(e,t,i){"use strict";function s(e){return e.className&&e.className.indexOf("parent-grid-item")>-1||e.className.indexOf("van-grid-item van-grid-item--square")>-1?e.offsetTop:e.parentElement?s(e.parentElement)+e.offsetTop:e.offsetTop}function a(e){return e.className&&e.className.indexOf("parent-grid-item")>-1?e.offsetLeft:e.offsetParent?a(e.offsetParent)+e.offsetLeft:e.offsetLeft}i.d(t,"b",(function(){return s})),i.d(t,"a",(function(){return a}))},"3b6f":function(e,t,i){e.exports=i.p+"static/img/history.e973a23c.svg"},"47cb8":function(e,t,i){},"5d88":function(e,t,i){var s={"./Favoritestarrate.svg":"ba29","./add-file.svg":"cb53","./audio.svg":"5b8d","./back.svg":"c557","./breadcrumb-right.svg":"16b5","./cancel-share.svg":"5c1e","./close.svg":"7710","./contents.svg":"6e48","./dashboard.svg":"f782","./docment.svg":"29ad","./document.svg":"fd28","./example.svg":"30c3","./eye-open.svg":"d7ec","./eye.svg":"4df5","./file-Ds-store.svg":"c5e8","./file-add.svg":"6ab0","./file-bat.svg":"d3b9","./file-class.svg":"b7ab","./file-cmake.svg":"4fee","./file-conf.svg":"fa5a","./file-cpp.svg":"33e1","./file-css.svg":"270b","./file-csv.svg":"8d1b","./file-dart.svg":"2f38","./file-db.svg":"d0a2","./file-dmg.svg":"a240","./file-docxf.svg":"393d","./file-drawio.svg":"6a4e","./file-excel.svg":"bd70","./file-exe.svg":"49f2","./file-factories.svg":"f3c5","./file-gitignore.svg":"47ff","./file-go.svg":"b909","./file-gradle.svg":"00d8","./file-gzip.svg":"bdb5","./file-h.svg":"5623","./file-html.svg":"e9ad","./file-idea.svg":"0ab8","./file-iso.svg":"70a9","./file-jar.svg":"fd7c","./file-java.svg":"2870","./file-js.svg":"6b09","./file-json.svg":"b7f1","./file-key.svg":"09e8","./file-log.svg":"1f55","./file-md.svg":"f421","./file-mind.svg":"5399","./file-ncm.svg":"60c7","./file-pdf.svg":"63f3","./file-pem.svg":"2afe","./file-php.svg":"13a8","./file-pkg.svg":"f4b7","./file-plist.svg":"77a2","./file-ppt.svg":"1d06","./file-properties.svg":"9339","./file-python.svg":"0c41","./file-shell.svg":"3f78","./file-swift.svg":"00b4","./file-tar.svg":"cf7d","./file-txt.svg":"374b","./file-upload.svg":"c9b7","./file-vue.svg":"2bc8","./file-word.svg":"5743","./file-xls.svg":"e6ed","./file-xml.svg":"e155","./file-xsl.svg":"7f33","./file-yml.svg":"3671","./file.svg":"b8b2","./folder-128.svg":"5911","./folder-add.svg":"2129","./folder-upload.svg":"c04d","./folder.svg":"d079","./form.svg":"eb1b","./fullscreen.svg":"9921","./gongxiangzhongxin.svg":"3886","./home.svg":"6bbe","./image.svg":"8736","./jmal-cloud.svg":"0340","./link.svg":"18f0","./loading-image-error.svg":"bd9b","./md-list.svg":"2edc4","./md.svg":"304e","./menu-addtab.svg":"2c60","./menu-ascending.svg":"d129","./menu-copy.svg":"f613","./menu-descending.svg":"8e8c","./menu-deselect.svg":"3a0f","./menu-details.svg":"8ec2","./menu-download.svg":"8d45","./menu-edit1.svg":"ce0b","./menu-empty.svg":"3d2e","./menu-favorite-hover.svg":"aeb7","./menu-favorite.svg":"f17e","./menu-grid.svg":"4195","./menu-list.svg":"7f6d","./menu-null.svg":"8707","./menu-open.svg":"00bd","./menu-point.svg":"c784","./menu-remove.svg":"910d","./menu-rename.svg":"f1ae","./menu-select.svg":"cdac","./menu-unfavorite-hover.svg":"83bf","./menu-unfavorite.svg":"b554","./menu-unselect.svg":"21bd","./more.svg":"3dd0","./nested.svg":"dcf8","./normalscreen.svg":"7a3a","./open-folder.svg":"03fd","./password.svg":"2a3d","./release.svg":"7186","./search.svg":"8e8d","./share.svg":"5306","./tab-favorite.svg":"4a51","./tab-folder.svg":"93d7","./tab-recently.svg":"44b8","./tab-setting.svg":"46d6","./table.svg":"47f1","./tree.svg":"93cd","./user.svg":"b3b5","./video.svg":"8f2b","./warring.svg":"c1c0","./widget-email.svg":"5863","./widget-github.svg":"ca9d","./widget-music.svg":"2e4a","./widget-subscription.svg":"fba5","./yes.svg":"8d65","./zip.svg":"8aa6","./ziyuan.svg":"adc6","./zuijinyuedu.svg":"d565"};function a(e){var t=n(e);return i(t)}function n(e){var t=s[e];if(!(t+1)){var i=new Error("Cannot find module '"+e+"'");throw i.code="MODULE_NOT_FOUND",i}return t}a.keys=function(){return Object.keys(s)},a.resolve=n,e.exports=a,a.id="5d88"},bc1a:function(e,t,i){e.exports=i.p+"static/img/infuse.50fcf44b.webp"},ec66:function(e,t,i){"use strict";i("47cb8")},ed11:function(e,t,i){e.exports=i.p+"static/img/iina.7b2369eb.webp"}}]);